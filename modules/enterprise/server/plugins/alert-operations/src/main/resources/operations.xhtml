<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:a4j="https://richfaces.org/a4j"
      xmlns:rich="http://richfaces.ajax4jsf.org/rich"
      xmlns:onc="http://jboss.org/on/component" >

<body>

        <h:panelGrid columns="2">
            <h:outputText value="Resource Selection Mode:" style="width: 150px;" />
            <h:selectOneMenu value="#{operationsBean.selectionMode}" >
                <f:selectItem itemValue="none" itemLabel="Select..." />
                <f:selectItems value="#{operationsBean.selectionModeOptions}" />
            </h:selectOneMenu>
            
            <h:outputText value="Resource ID:" rendered="#{operationsBean.selectionMode eq 'specific'}" />
            <h:panelGroup rendered="#{operationsBean.selectionMode eq 'specific'}">
                <h:inputText value="#{operationsBean.resourceId}" id="resourceId" />
                <a href="#"
                   onclick="window.open('/rhq/inventory/resourcePicker.xhtml?nomenu=true&amp;fieldId=customContentForm:resourceId', 'Pick a resource','width=800;height=500;scrollbars=yes,toolbar=no,resizable=yes,left=100,top=100'); return false;"
                   class="buttonmed">Pick</a>
            </h:panelGroup>
            
            <h:outputText value="Start Search From:" style="width: 200px;" rendered="#{operationsBean.selectionMode eq 'relative'}" />
            <h:selectOneMenu value="#{operationsBean.ancestorTypeId}" rendered="#{operationsBean.selectionMode eq 'relative'}">
                <f:selectItem itemValue="none" itemLabel="Select..." />
                <f:selectItems value="#{operationsBean.ancestorTypeOptions}" />
            </h:selectOneMenu>
            
            <h:outputText value="Then Filter By:" style="width: 200px;" rendered="#{operationsBean.selectionMode eq 'relative'}"/>
            <h:panelGroup rendered="#{operationsBean.selectionMode eq 'relative'}">
                <h:selectOneMenu value="#{operationsBean.descendantTypeId}">
                    <f:selectItem itemValue="none" itemLabel="Select..." />
                    <f:selectItems value="#{operationsBean.descendantTypeOptions}" />
                </h:selectOneMenu>
                <h:inputText value="#{operationsBean.descendantName}" id="nameFilter" 
                             onfocus="if (this.value == 'Name (optional)') { this.value = ''; this.style.color = 'black'; } "
                             onblur="if (this.value == '') { this.value = 'Name (optional)'; this.style.color = 'gray'; } "/>
            </h:panelGroup>
            
            <h:outputText value="Operation Name:" rendered="#{!empty operationsBean.effectiveResourceTypeId}"/>
            <h:selectOneMenu value="#{operationsBean.operationDefinitionId}" 
                             rendered="#{!empty operationsBean.effectiveResourceTypeId}" >
                <f:selectItem itemValue="none" itemLabel="Select..." />
                <f:selectItems value="#{operationsBean.operationNameOptions}"/>
            </h:selectOneMenu>
        </h:panelGrid>
            
        <h:panelGroup rendered="#{!empty operationsBean.operationDefinitionId and operationsBean.operationDefinitionId ne 'none'}">
            <onc:config configurationDefinition="#{operationsBean.argumentsConfigurationDefinition}"
                        configuration="#{operationsBean.argumentsConfiguration}"
                        nullConfigurationDefinitionMessage="#{operationsBean.noParametersMessage}"
                        nullConfigurationMessage="#{operationsBean.notInitializedMessage}"
                        nullConfigurationStyle="InfoBlock"
                        readOnly="false" />
        </h:panelGroup>

        <script>
            addWindowOnLoadEvent(function() {
                var nameFilterElement = getElementCrossBrowser('customContentForm:nameFilter')
                if (nameFilterElement.value == 'Name (optional)') {
                    nameFilterElement.style.color = 'gray';
                }
            });
        </script>

<rich:modalPanel id="ResourcePicker">
    <h:outputLink>Hello World</h:outputLink>
    <p/>
    <a onclick="Richfaces.hideModalPanel('ResourcePicker');" href="#">Hide</a>
</rich:modalPanel>


</body>
</html>
