<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:a4j="https://richfaces.org/a4j"
      xmlns:rich="http://richfaces.ajax4jsf.org/rich"
      xmlns:onc="http://jboss.org/on/component" >

<body>

        <h:panelGrid columns="2">
            <h:outputText value="Selection Mode:" style="width: 150px;" />
            <h:selectOneMenu value="#{operationsBean.selectionMode}" >
                <f:selectItem itemValue="none" itemLabel="Select..." />
                <f:selectItems value="#{operationsBean.selectionModeOptions}" />
            </h:selectOneMenu>
            
            <h:outputText value="Resource ID:" rendered="#{operationsBean.selectionMode eq 'specific'}" />
            <h:inputText  value="#{operationsBean.resourceId}" rendered="#{operationsBean.selectionMode eq 'specific'}" />
            
            <h:outputText value="Ancestor Type:" style="width: 200px;" rendered="#{operationsBean.selectionMode eq 'relative'}" />
            <h:selectOneMenu value="#{operationsBean.ancestorTypeId}" rendered="#{operationsBean.selectionMode eq 'relative'}">
                <f:selectItem itemValue="none" itemLabel="Select..." />
                <f:selectItems value="#{operationsBean.relativeTypeOptions}" />
            </h:selectOneMenu>
            <h:outputText value="Ancestor Name:" rendered="#{operationsBean.selectionMode eq 'relative'}"/>
            <h:inputText  value="#{operationsBean.ancestorName}" rendered="#{operationsBean.selectionMode eq 'relative'}"/>
            
            <h:outputText value="Descendant Type:" style="width: 200px;" rendered="#{operationsBean.selectionMode eq 'relative'}"/>
            <h:selectOneMenu value="#{operationsBean.descendantTypeId}" rendered="#{operationsBean.selectionMode eq 'relative'}">
                <f:selectItem itemValue="none" itemLabel="Select..." />
                <f:selectItems value="#{operationsBean.relativeTypeOptions}" />
            </h:selectOneMenu>
            <h:outputText value="Descendant Name:" rendered="#{operationsBean.selectionMode eq 'relative'}"/>
            <h:inputText  value="#{operationsBean.descendantName}" rendered="#{operationsBean.selectionMode eq 'relative'}"/>
            
            <h:outputText value="Operation Name:" rendered="#{!empty operationsBean.effectiveResourceTypeId}"/>
            <h:selectOneMenu value="#{operationsBean.operationDefinitionId}" 
                             rendered="#{!empty operationsBean.effectiveResourceTypeId}" >
                <f:selectItem itemValue="none" itemLabel="Select..." />
                <f:selectItems value="#{operationsBean.operationNameOptions}"/>
            </h:selectOneMenu>
        </h:panelGrid>
            
        <h:panelGroup rendered="#{!empty operationsBean.operationDefinitionId and operationsBean.operationDefinitionId ne 'none'}">
            <onc:config configurationDefinition="#{operationsBean.argumentsConfigurationDefinition}"
                        configuration="#{operationsBean.argumentsConfiguration}"
                        nullConfigurationDefinitionMessage="#{operationsBean.noParametersMessage}"
                        nullConfigurationMessage="#{operationsBean.notInitializedMessage}"
                        nullConfigurationStyle="InfoBlock"
                        readOnly="false" />
        </h:panelGroup>

    <ui:remove>
    <rich:panel header="Resource Selection">
        <h:panelGrid columns="3" >
            <h:outputText value="Select mode:" style="width: 200px;" />
            <h:selectOneMenu id="resMode" value="#{operationsBean.resMode}">
                <f:selectItem itemValue="fixed" itemLabel="Resource ID"/>
                <f:selectItem itemValue="deferred" itemLabel="Path to resource"/>
            </h:selectOneMenu>
            <rich:spacer />
        
            <h:outputText value="Target resource:"/>
            <h:inputText id="resourceId" title="Target Resource" value="#{operationsBean.resId}"/>
            <a href="#"
               onclick="window.open('/rhq/inventory/resourcePicker.xhtml?formId=customContentForm:selectResourceForm&amp;fieldId=resourceId', 'Pick a resource','width=800;height=500;scrollbars=yes,toolbar=no,resizable=yes,left=100,top=100'); return false;"
               class="buttonmed">Pick</a>
               
            <h:commandButton id="resourceIdSubmit"
                             value="Select"
                             type="submit"
                             action="#{operationsBean.selectResource}"
                             styleClass="buttonmed" />
        </h:panelGrid>
    </rich:panel>

    <rich:panel rendered="#{not empty operationsBean.operationIds}" header="Operations under '#{operationsBean.resourceName}'">
        <h:panelGrid columns="3" >
            <h:outputText value="Select operation:" style="width: 200px;" />
            <h:selectOneMenu id="selectOperationMenu" value="#{operationsBean.operationId}">
                <f:selectItems value="#{operationsBean.operationIds}"/>
            </h:selectOneMenu>
            <rich:spacer />
        
            <h:commandButton id="opNameSubmit"
                             value="Select"
                             type="submit"
                             action="#{operationsBean.selectOperation}"
                             styleClass="buttonmed" />
        </h:panelGrid>
    </rich:panel>

    <h:messages />
    <rich:panel rendered="#{not empty operationsBean.operationId}" header="Operation details for '#{operationsBean.operationName}'">
        <onc:config configurationDefinition="#{operationsBean.configurationDefinition}"
                    configuration="#{operationsBean.configuration}"
                    nullConfigurationDefinitionMessage="#{operationsBean.nullConfigurationDefinitionMessage}"
                    nullConfigurationMessage="#{nullConfigurationMessage}"
                    nullConfigurationStyle="InfoBlock"
                    readOnly="false" />
        <p/>
        <ui:remove>
        <h:commandButton id="opParamSubmit"
                         value="Set"
                         type="submit"
                         action="#{operationsBean.useConfiguration}"
                         styleClass="buttonmed" />
        </ui:remove>
    </rich:panel>
    </ui:remove>

<rich:modalPanel id="ResourcePicker">
    <h:outputLink>Hello World</h:outputLink>
    <p/>
    <a onclick="Richfaces.hideModalPanel('ResourcePicker');" href="#">Hide</a>
</rich:modalPanel>


</body>
</html>
