<project
   xmlns="http://maven.apache.org/POM/4.0.0"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

   <modelVersion>4.0.0</modelVersion>

   <parent>
      <groupId>org.rhq</groupId>
      <artifactId>rhq-parent</artifactId>
      <version>1.3.0-SNAPSHOT</version>
   </parent>

   <groupId>org.rhq</groupId>
   <artifactId>rhq-client</artifactId>
   <packaging>pom</packaging>

   <name>RHQ Enterprise Remote Client</name>
   <description>RHQ Remote Client</description>

   <scm>
      <connection>scm:svn:http://svn.rhq-project.org/repos/rhq/trunk/modules/enterprise/client/</connection>
      <developerConnection>scm:svn:http://svn.rhq-project.org/repos/rhq/trunk/modules/enterprise/client/</developerConnection>
   </scm>

   <properties>
      <scm.module.path>modules/enterprise/client/</scm.module.path>

      <jline.version>0.9.94</jline.version>
      <I18Nlog.version>1.0.9</I18Nlog.version>
      <persistence-api.version>1.0</persistence-api.version>      
   </properties>

   <dependencies>

      <!-- Required for WS API Clients or generation -->
      <!-- 
      <dependency>
         <groupId>jboss</groupId>
         <artifactId>jbossws</artifactId>
         <scope>provided</scope>
         <type>zip</type>
      </dependency>
      -->

      <!-- This only validates that a container is available.  We only use it if
           we can't find an exploded AS already under the container target directory -->
      <dependency>
         <groupId>org.rhq</groupId>
         <artifactId>rhq-enterprise-server-container</artifactId>
         <version>${project.version}</version>         
         <type>zip</type>
         <scope>provided</scope>
      </dependency>

      <dependency>
         <groupId>org.rhq</groupId>
         <artifactId>rhq-enterprise-server</artifactId>
         <version>${project.version}</version>
         <type>ejb</type>
         <scope>compile</scope>
      </dependency>

      <dependency>
         <groupId>org.rhq</groupId>
         <artifactId>rhq-core-domain</artifactId>
         <version>${project.version}</version>
         <type>ejb</type>
         <scope>compile</scope>         
      </dependency>

      <!-- Required by the CLI  -->
      <dependency>
         <groupId>gnu-getopt</groupId>
         <artifactId>getopt</artifactId>
         <!-- NOTE: The version is defined in the root POM's dependencyManagement section. -->
      </dependency>

      <dependency>
         <groupId>I18Nlog</groupId>
         <artifactId>I18Nlog</artifactId>
         <version>${I18Nlog.version}</version>
      </dependency>

      <dependency>
         <groupId>jline</groupId>
         <artifactId>jline</artifactId>
         <version>${jline.version}</version>
      </dependency>

   </dependencies>

   <build>
      <plugins>

         <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>

               <execution>
                  <id>client-distribution</id>
                  <phase>install</phase>
                  <configuration>
                     <tasks>
                        <ant
                           antfile="${basedir}/src/main/resources/rhq-client.build.xml"
                           dir="${basedir}"
                           target="prepare-dist"
                           inheritAll="false"
                           inheritRefs="false">

                           <property
                              name="java.jre.home"
                              value="${java.home}" />

                           <property
                              name="maven.compile.classpath"
                              refid="maven.compile.classpath" />
                           <property
                              name="maven.runtime.classpath"
                              refid="maven.runtime.classpath" />
                           <property
                              name="buildNumber"
                              value="${buildNumber}" />
                              
                           <property
                              name="project.build.outputDirectory"
                              value="${project.build.outputDirectory}" />
                           <property
                              name="project.name"
                              value="${project.name}" />
                           <property
                              name="project.groupId"
                              value="${project.groupId}" />
                           <property
                              name="project.version"
                              value="${project.version}" />
                           <property
                              name="settings.localRepository"
                              value="${settings.localRepository}" />
                           <property
                              name="getopt.version"
                              value="${getopt.version}" />
                           <property
                              name="jbossws.version"
                              value="${jbossws.version}" />
                           <property
                              name="jline.version"
                              value="${jline.version}" />
                           <property
                              name="persistence-api.version"
                              value="${persistence-api.version}" />
                              
                        </ant>
                     </tasks>
                  </configuration>
                  <goals>
                     <goal>run</goal>
                  </goals>
               </execution>

            </executions>

         </plugin>

      </plugins>
   </build>

</project>
