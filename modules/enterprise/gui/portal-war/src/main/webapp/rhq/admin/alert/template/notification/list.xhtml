<?xml version="1.0" encoding="UTF-8"?>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:onc="http://jboss.org/on/component"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.ajax4jsf.org/rich">

<ui:composition template="/rhq/layout/main.xhtml">

    <ui:param name="pageTitle" value="List Alert Notification Templates"/>

    <ui:define name="metaHeaders">
        <style>
            #senderName {
                display: none;
            }
        </style>
    </ui:define>

    <ui:define name="breadcrumbs">
       <h:outputLink value="/rhq/admin/alert/template/notification/list.xhtml">
          <h:outputText value="Alert Notification Templates" />
       </h:outputLink>
    </ui:define>

    <ui:define name="body">
        <br/>
        <h:messages showDetail="true"
                    globalOnly="true"
                    infoClass="InfoBlock"
                    warnClass="WarnBlock"
                    errorClass="ErrorBlock"
                    fatalClass="FatalBlock"
                    layout="table" />

      <h:form id="listAlertNotificationTemplatesForm">
         <rich:panel>
            <f:facet name="header">
               <h:outputText value="Alert Notification Templates"/>
            </f:facet>

            <h:panelGrid columns="1" styleClass="data-table">
            <h:outputText value="*Templates are groups of notifications that can be applied to alert definitions en masse" />
            <br/>
            
            <ui:param name="notificationTemplateDataModel" value="#{ListAlertNotificationTemplatesUIBean.alertNotificationTemplates}"/>
            <rich:dataTable id="notificationTemplateDataModel"
                            rows="0"
                            value="#{notificationTemplateDataModel}"
                            var="notificationTemplate"
                            width="100%"
                            columnsWidth="1%, 30%, 40%, 15%, 15%"
                            styleClass="resources-table"
                            headerClass="tableRowHeader"
                            footerClass="on-pager-footer"
                            onRowMouseOver="this.style.backgroundColor='#E7E7E7'"
                            onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'">

               <f:facet name="PageControlView">
                  <onc:paginationControl id="NONE" />
               </f:facet>

               <rich:column>
                  <f:facet name="header">
                     <onc:allSelect target="selectedNotificationTemplates" />
                  </f:facet>

                  <onc:select name="selectedNotificationTemplates" value="#{notificationTemplate.id}" />
               </rich:column>

               <rich:column>
                  <f:facet name="header">
                     <onc:sortableColumnHeader sort="name">
                        <h:outputText styleClass="headerText" value="Name" />
                     </onc:sortableColumnHeader>
                  </f:facet>

                  <h:outputLink value="/rhq/admin/alert/template/notification/details.xhtml">
                     <f:param name="templateId" value="#{notificationTemplate.id}" />
                     <f:param name="mode" value="view" />
                     <h:outputText value="#{notificationTemplate.name}" />
                  </h:outputLink>
               </rich:column>

               <rich:column>
                  <f:facet name="header">
                     <onc:sortableColumnHeader sort="description">
                        <h:outputText styleClass="headerText" value="Description" />
                     </onc:sortableColumnHeader>
                  </f:facet>

                  <h:outputText value="#{notificationTemplate.description}" />
               </rich:column>
               
               <rich:column>
                  <f:facet name="header">
                     <onc:sortableColumnHeader sort="ctime">
                        <h:outputText styleClass="headerText" value="Created" />
                     </onc:sortableColumnHeader>
                  </f:facet>

                  <h:outputText value="#{notificationTemplate.ctime}">
                     <f:converter converterId="UserDateTimeConverter" />
                  </h:outputText>
               </rich:column>
               
               <rich:column>
                  <f:facet name="header">
                     <onc:sortableColumnHeader sort="mtime">
                        <h:outputText styleClass="headerText" value="Last Modified" />
                     </onc:sortableColumnHeader>
                  </f:facet>

                  <h:outputText value="#{notificationTemplate.mtime}">
                     <f:converter converterId="UserDateTimeConverter" />
                  </h:outputText>
               </rich:column>

               <f:facet name="footer">
                  <rich:columnGroup>
                     <rich:column colspan="5" width="100%">
                        <h:commandButton action="#{ListAlertNotificationTemplatesUIBean.createNewAlertNotificationTemplate}"
                                         value="CREATE NEW" styleClass="on-pager-button buttonsmall"
                                         rendered="#{GlobalPermissionsUIBean.inventory}" />
                        <onc:selectCommandButton action="#{ListAlertNotificationTemplatesUIBean.deleteSelectedAlertNotificationTemplates}"
                                                 value="DELETE SELECTED" target="selectedNotificationTemplates" styleClass="on-pager-button buttonsmall"
                                                 rendered="#{GlobalPermissionsUIBean.inventory}" />
                     </rich:column>
                  </rich:columnGroup>
               </f:facet>

               <h:outputText value="Templates are groups of preconfigured alert notifications that can later be applied to alert definitions" />

            </rich:dataTable>
            </h:panelGrid>
        </rich:panel>
     </h:form>

    </ui:define>
</ui:composition>

</html>
