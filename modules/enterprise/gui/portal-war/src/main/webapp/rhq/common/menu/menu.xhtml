<a4j:region renderRegionOnly="true" selfRendered="true"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:rich="http://richfaces.ajax4jsf.org/rich"
        xmlns:a4j="http://richfaces.org/a4j">

<h:form >

<f:loadBundle basename="ApplicationResources" var="msg"/>

<rich:toolBar styleClass="topMenu">
<rich:toolBarGroup location="left">

<h:outputLink value="/">
    <h:graphicImage value="/images/logo_icon.png"/>
</h:outputLink>

<rich:dropDownMenu>
    <f:facet name="label">
        <h:panelGroup>
            <h:outputLink value="/Dashboard.do">
                <h:outputText value="#{msg['dash.home.PageTitle']}"/>
            </h:outputLink>
        </h:panelGroup>
    </f:facet>
</rich:dropDownMenu>

<rich:dropDownMenu >
    <f:facet name="label">
        <h:panelGroup>
            <h:outputLink value="/ResourceHub.do">
                <h:outputText value="Resources"/>
            </h:outputLink>
        </h:panelGroup>
    </f:facet>

    <rich:menuItem actionListener="#{IncludeUIBean.menuItemListener}">
        <h:outputLink value="/ResourceHub.do?resourceCategory=PLATFORM">
            <h:outputText value="#{msg['resource.hub.filter.platform']}"/>
        </h:outputLink>
    </rich:menuItem>

    <rich:menuItem actionListener="#{IncludeUIBean.menuItemListener}">
        <h:outputLink value="/ResourceHub.do?resourceCategory=SERVER">
            <h:outputText value="#{msg['resource.hub.filter.server']}"/>
        </h:outputLink>
    </rich:menuItem>

    <rich:menuItem actionListener="#{IncludeUIBean.menuItemListener}">
        <h:outputLink value="/ResourceHub.do?resourceCategory=SERVICE">
            <h:outputText value="#{msg['resource.hub.filter.service']}"/>
        </h:outputLink>
    </rich:menuItem>

    <rich:menuSeparator/>

    <rich:menuGroup value="Groups">
        <rich:menuItem actionListener="#{IncludeUIBean.menuItemListener}">
            <h:outputLink value="/GroupHub.do">
                <f:param name="groupCategory" value="COMPATIBLE"/>
                <h:outputText value="#{msg['resource.hub.filter.compatibleGroups']}"/>
            </h:outputLink>
        </rich:menuItem>
        <rich:menuItem actionListener="#{IncludeUIBean.menuItemListener}">
            <h:outputLink value="/GroupHub.do?groupCategory=MIXED">
                <h:outputText value="#{msg['resource.hub.filter.mixedGroups']}"/>
            </h:outputLink>
        </rich:menuItem>
        <rich:menuItem actionListener="#{IncludeUIBean.menuItemListener}">
            <h:outputLink value="/rhq/definition/group/list.xhtml">
                <h:outputText value="#{msg['resource.hub.filter.groupDefinitions']}"/>
            </h:outputLink>
        </rich:menuItem>
    </rich:menuGroup>

    <rich:menuSeparator/>

    <rich:menuGroup value="Subsystem Views">
        <rich:menuItem actionListener="#{IncludeUIBean.menuItemListener}" >
            <h:outputLink value="/rhq/subsystem/layout/main.xhtml?tab=configurationUpdates">Configuration Changes</h:outputLink>
        </rich:menuItem>
        <rich:menuItem actionListener="#{IncludeUIBean.menuItemListener}">
            <h:outputLink value="/rhq/subsystem/layout/main.xhtml?tab=problemResources">Problem Resources</h:outputLink>
        </rich:menuItem>
        <rich:menuItem actionListener="#{IncludeUIBean.menuItemListener}">
            <h:outputLink value="/rhq/subsystem/layout/main.xhtml?tab=operations">Operations</h:outputLink>
        </rich:menuItem>
        <rich:menuItem actionListener="#{IncludeUIBean.menuItemListener}">
            <h:outputLink value="/rhq/subsystem/layout/main.xhtml?tab=alerts">Alerts</h:outputLink>
        </rich:menuItem>
        <rich:menuItem actionListener="#{IncludeUIBean.menuItemListener}">
            <h:outputLink value="/rhq/subsystem/layout/main.xhtml?tab=alertDefinitions">Alert Definitions</h:outputLink>
        </rich:menuItem>
    </rich:menuGroup>

    <rich:menuSeparator/>

    <rich:menuItem submitMode="none" disabled="true">
        <h:outputText value="Search: " style="color: black;"/>



                <h:panelGroup>

                    <h:inputText id="selectedResource" style="width: 250px;" immediate="true"/>
                    <h:graphicImage value="/images/icon_menu_down.gif"
                                    onclick="#{rich:component('resourceSelectBox')}.callSuggestion(true)"/>

                    <rich:suggestionbox id="resourceSelectBox" for="selectedResource" tokens=",[]"
                                        ajaxSingle="true" immediate="true"
                                        suggestionAction="#{ResourceSelectUIBean.autocomplete}"
                                        var="result" data="foo" fetchValue="#{result.resource.id}"
                                        nothingLabel="No matching resources found"
                                        style="background-color: #cccccc;"
                                        onselect="document.location.href='/rhq/resource/monitor/graphs.xhtml?id=' + #{rich:element('selectedResource')}.value"
                                        usingSuggestObjects="false" width="700" height="400">


                        <h:column>
                            <f:facet name="header">Avail</f:facet>
                            <h:graphicImage
                                    value="/images/icon_available_#{result.availability == 'UP' ? 'green' : 'red'}.png"/>
                        </h:column>
                        <h:column>
                            <f:facet name="header">Resource</f:facet>
                            <h:outputText value="#{result.resource.name}"/>
                        </h:column>
                        <h:column>
                            <f:facet name="header">Parent</f:facet>
                            <h:outputText value="#{result.parent.name}"/>
                        </h:column>

                    </rich:suggestionbox>

                </h:panelGroup>


    </rich:menuItem>

</rich:dropDownMenu>

<rich:dropDownMenu>
    <f:facet name="label">
        <h:panelGroup>
            <h:outputLink value="/Admin.do">
                <h:outputText value="#{msg['admin.admin.AdministrationTitle']}"/>
            </h:outputLink>
        </h:panelGroup>
    </f:facet>
    <rich:menuGroup value="Tools">
        <rich:menuItem actionListener="#{IncludeUIBean.menuItemListener}">
            <h:outputLink value="/admin/config/EditDefaults.do">
                <f:param name="mode" value="monitor"/>
                <f:param name="viewMode" value="all"/>
                <h:outputText value="Monitoring Defaults"/>
            </h:outputLink>
        </rich:menuItem>

        <rich:menuItem actionListener="#{IncludeUIBean.menuItemListener}">
            <h:outputLink value="/admin/license/LicenseAdmin.do?mode=view">
                <h:outputText value="#{msg['header.license']}"/>
            </h:outputLink>
        </rich:menuItem>
    </rich:menuGroup>

    <rich:menuGroup value="Security">
        <rich:menuItem actionListener="#{IncludeUIBean.menuItemListener}">
            <h:outputLink value="/admin/user/UserAdmin.do">
                <f:param name="mode" value="list"/>
                <h:outputText value="Manage Users"/>
            </h:outputLink>
        </rich:menuItem>
        <rich:menuItem actionListener="#{IncludeUIBean.menuItemListener}">
            <h:outputLink value="/admin/role/RoleAdmin.do">
                <f:param name="mode" value="list"/>
                <h:outputText value="Manage Roles"/>
            </h:outputLink>
        </rich:menuItem>
    </rich:menuGroup>
</rich:dropDownMenu>

<rich:dropDownMenu>
    <f:facet name="label">
        <h:panelGroup>
            <h:outputText value="#{msg['header.help.link']}"/>
        </h:panelGroup>
    </f:facet>

    <rich:menuItem actionListener="#{IncludeUIBean.menuItemListener}">
        <h:outputLink value="https://docs.jbosson.redhat.com/confluence/display/JON2/" target="blank_">
            <h:outputText value="Online Documentation"/>
        </h:outputLink>
    </rich:menuItem>

    <rich:menuItem actionListener="#{IncludeUIBean.menuItemListener}">
        <h:outputLink value="https://support.redhat.com/jbossnetwork/restricted/addCase.html" target="blank_">
            <h:outputText value="Open a Support Case"/>
        </h:outputLink>
    </rich:menuItem>

    <rich:menuSeparator/>

    <rich:menuItem submitMode="none">
        <h:outputLink value="#" id="link">
            <h:outputText value="#{msg['header.about.link']}"/>
            <rich:componentControl for="aboutPanel" attachTo="link" operation="show" event="onclick"/>
        </h:outputLink>
    </rich:menuItem>
</rich:dropDownMenu>


</rich:toolBarGroup>


<rich:toolBarGroup location="right">

    <a4j:status id="commonStatus" layout="block"
                startStyle=" filter:alpha(opacity=85); -moz-opacity: 0.85; opacity: 0.85; vertical-align: middle;">
        <f:facet name="start">
            <img src="/images/ajax-loader.gif" alt="" style="vertical-align:middle;"/> <span
                style="vertical-align: middle;">Loading...</span>
        </f:facet>
    </a4j:status>


    <rich:dropDownMenu>
        <f:facet name="label">
            <h:panelGroup>
                <h:outputText value="Logged in as #{UserPreferencesUIBean.subject.name}"/>
            </h:panelGroup>
        </f:facet>
        <rich:menuItem actionListener="#{IncludeUIBean.menuItemListener}">
            <h:outputLink value="/admin/user/UserAdmin.do">
                <f:param name="mode" value="edit"/>
                <f:param name="u" value="2"/>
                <h:outputText value="Edit Details"/>
            </h:outputLink>
        </rich:menuItem>

        <rich:menuItem actionListener="#{IncludeUIBean.menuItemListener}">
            <h:outputLink value="/admin/user/UserAdmin.do">
                <f:param name="mode" value="editPass"/>
                <f:param name="u" value="2"/>
                <h:outputText value="Change Password"/>
            </h:outputLink>
        </rich:menuItem>

        <rich:menuSeparator/>

        <rich:menuItem>
            <h:outputLink value="/Logout.do">
                <h:outputText value="Logout"/>
            </h:outputLink>
        </rich:menuItem>
    </rich:dropDownMenu>

 <!--       <div style="background-color: red; top: 0px; left: 450px; display: none;">
    <a4j:region renderRegionOnly="true" selfRendered="true">
        <h:form>
            <h:panelGrid columns="2">
                <h:inputText id="myinput" value="#{UserPreferencesUIBean.leftResourceNavState}">
                    <a4j:support event="onblur" reRender="outtext"/>
                </h:inputText>
                <h:outputText id="outtext" value="#{UserPreferencesUIBean.leftResourceNavState}"/>
            </h:panelGrid>
        </h:form>
    </a4j:region>
</div>-->

</rich:toolBarGroup>
</rich:toolBar>

<rich:modalPanel id="aboutPanel" resizeable="false" width="320" height="220">
    <f:facet name="header">
        <h:panelGroup>
            <h:outputText value="#{msg['about.Title']}"/>
        </h:panelGroup>
    </f:facet>
    <f:facet name="controls">
        <h:panelGroup>
            <h:graphicImage value="/images/close.png" style="cursor:pointer" id="hidelink"/>
            <rich:componentControl for="aboutPanel" attachTo="hidelink" operation="hide" event="onclick"/>
        </h:panelGroup>
    </f:facet>

    <p>
        <span class="DisplaySubhead"><h:outputText value="#{msg['footer.aboutLink']}"/></span><br/>
        <span class="DisplayLabel"><h:outputText value="#{msg['footer.version']}: #{msg['product.version']}"/></span><br/>
        <span class="DisplayLabel"><h:outputText value="#{msg['footer.buildNumber']}: #{msg['product.buildNumber']}"/></span>
    </p>

    <p>
        <f:verbatim><h:outputText value="#{msg['footer.copyright']}"/></f:verbatim> <h:outputText value="#{msg['about.Copyright.Content']}"/>
    </p>

    <p>
        <h:outputText value="#{msg['about.MoreInfo.Label']}"/><br/>
<!--
        <a href='mailto:<h:outputText value="#{msg['about.MoreInfo.LinkSales']}"/>'><h:outputText value="#{msg['about.MoreInfo.LinkSales']}"/></a><br/>
        <a href='mailto:<h:outputText value="#{msg['about.MoreInfo.LinkSupport']}"/>'><h:outputText value="#{msg['about.MoreInfo.LinkSupport']}"/></a>
-->
    </p>

    <input type="button" value="Ok" onclick="Richfaces.hideModalPanel('aboutPanel');"/>
</rich:modalPanel>




</h:form>

</a4j:region>