<?xml version="1.0"?>

<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:rich="http://richfaces.ajax4jsf.org/rich"
      xmlns:onc="http://jboss.org/on/component"
      xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
      xmlns:onf="http://jboss.org/on/function">

THIS TEXT WILL BE REMOVED.

The template for the summary section of all Resource Group pages (i.e. the Monitor/Inventory/etc. tabbed pages).
NOTE: This template is leveraged by both Facelets pages and JSP/Tiles pages.

REQUEST PARAMETERS:
groupId - the group id of the Group being accessed

<ui:composition>

    <h:form id="groupHeaderSummaryForm">

        <input type="hidden" name="groupId" value="#{ResourceGroupUIBean.groupId}"/>
        <input type="hidden" name="parentGroupId" value="#{param.parentGroupId}"/>
        <input type="hidden" name="category" value="#{param.category}"/>
        

        <rich:simpleTogglePanel switchType="ajax" id="summary-toggle-panel" headerClass="summaryHeader"
                                actionListener="#{UserPreferencesUIBean.updateSummaryPanelDisplayState}"
                                value="#{UserPreferencesUIBean.summaryPanelDisplayState}">

            <f:facet name="header">
                <h:panelGrid columns="2" width="90%">
                    <h:panelGroup>
                        <h:graphicImage value="/images/icn_tree_Cluster_on_24.png"/>
                        <h:outputText style="font-size: large;" value="#{ResourceGroupUIBean.name}"/>
                    </h:panelGroup>

                    <h:panelGroup layout="block" style="float: right;">
                        <h:graphicImage value="/images/icon_available_green_24.png" alt="Up" title="Up"
                                        rendered="#{ResourceGroupUIBean.availability == 1}"/>
                        <h:graphicImage value="/images/icon_available_red_24.png" alt="Down" title="Down"
                                        rendered="#{ResourceGroupUIBean.availability == 0}"/>
                        <h:graphicImage value="/images/icon_available_yellow_24.png" alt="Mixed" title="Mixed"
                                        rendered="#{ResourceGroupUIBean.availability gt 0 and ResourceGroupUIBean.availability lt 1}"/>
                        <h:graphicImage value="/images/icon_available_grey_24.png" alt="Unknown" title="Unknown"
                                        rendered="#{ResourceGroupUIBean.availability == null}"/>


                        <h:outputLink rendered="#{ResourceGroupUIBean.favorite}"
                                      value="/resource/common/QuickFavorites.do"
                                      styleClass="PageTitleSmallText">
                            <f:param name="groupId" value="#{ResourceGroupUIBean.groupId}"/>
                            <f:param name="mode" value="remove"/>
                            <h:outputText value="&nbsp;Remove from Favorites"/>
                            <h:graphicImage value="/images/title_arrow.gif" width="11" height="9"/>
                        </h:outputLink>

                        <ui:remove><!-- TODO change rendered to be "!" when favorite groups is implemented --></ui:remove>
                        <h:outputLink rendered="#{ResourceGroupUIBean.favorite}"
                                      value="/resource/common/QuickFavorites.do"
                                      styleClass="PageTitleSmallText">
                            <f:param name="groupId" value="#{ResourceGroupUIBean.groupId}"/>
                            <f:param name="mode" value="add"/>
                            <h:outputText value="&nbsp;Add to Favorites"/>
                            <h:graphicImage value="/images/title_arrow.gif" width="11" height="9"/>
                        </h:outputLink>
                    </h:panelGroup>
                </h:panelGrid>
            </f:facet>


            <h:panelGrid columns="2" width="100%" style="padding: 3px;">

                <h:panelGroup layout="block" styleClass="summary-content">

                    <!-- general properties (type, version, etc.) -->
                    <h:panelGrid columns="2" styleClass="summary-props-table" style=""
                                 columnClasses="summary-prop-cell">
                        <h:panelGroup layout="block">
                            <h:outputText value="Type: " styleClass="BoldText"/>
                            <h:outputText value="#{ResourceGroupUIBean.resourceType.name}
               (#{ResourceGroupUIBean.resourceType.category.displayName})"
                                          rendered="#{!empty ResourceGroupUIBean.resourceType}"/>
                            <h:outputText value="Mixed Types" style="font-style: italic"
                                          rendered="#{empty ResourceGroupUIBean.resourceType}"/>
                        </h:panelGroup>

                        <h:panelGroup layout="block">
                            <h:outputText value="Description: " styleClass="BoldText"/>
                            <h:outputText value="#{ResourceGroupUIBean.description}"
                                          rendered="#{!empty ResourceGroupUIBean.description}"/>
                            <h:outputText value="none" style="font-style: italic"
                                          rendered="#{empty ResourceGroupUIBean.description}"/>
                        </h:panelGroup>


                    </h:panelGrid>

                    <!-- spacer -->
                    <h:panelGroup layout="block" style="height: 13px"/>

                </h:panelGroup>


                <ui:remove><!-- the blue box at the top right --></ui:remove>
                <h:panelGroup layout="block">

                    <h:panelGrid columns="1" columnClasses="LinkBoxCell">


                    </h:panelGrid>

                </h:panelGroup>

            </h:panelGrid>

            <ui:param name="resourceGroupMembersDataModel" value="#{ListResourceGroupMembersUIBean.smallDataModel}"/>


            <rich:dataTable id="resourceGroupMembersDataTable"
                            style="width: 80%; margin-left: auto; margin-right: auto;"
                            rendered="#{ResourceGroupUIBean.compatible}"
                            rows="5"
                            value="#{resourceGroupMembersDataModel}"
                            var="resourceWithAvailability"
                            headerClass="tableRowHeader"
                            footerClass="on-pager-footer">

                <f:facet name="PageControlView">
                    <onc:paginationControl id="ResourceGroupMemberList"/>
                </f:facet>


                <rich:column>
                    <f:facet name="header">
                        <onc:sortableColumnHeader sort="res.name">
                            <h:outputText styleClass="headerText" value="Name"/>
                        </onc:sortableColumnHeader>
                    </f:facet>

                    <h:outputLink value="#{onf:getDefaultResourceTabURL()}">
                        <f:param name="id" value="#{resourceWithAvailability.resource.id}"/>
                        <h:outputText value="#{resourceWithAvailability.resource.name}"/>
                    </h:outputLink>
                </rich:column>

                <rich:column>
                    <f:facet name="header">
                        <onc:sortableColumnHeader sort="parent.name">
                            <h:outputText styleClass="headerText" value="Parent"/>
                        </onc:sortableColumnHeader>
                    </f:facet>

                    <h:outputLink value="#{onf:getDefaultResourceTabURL()}">
                        <f:param name="id" value="#{resourceWithAvailability.parent.id}"/>
                        <h:outputText value="#{resourceWithAvailability.parent.name}"/>
                    </h:outputLink>
                </rich:column>


                <rich:column>
                    <f:facet name="header">
                        <onc:sortableColumnHeader sort="a.availabilityType">
                            <h:outputText styleClass="headerText" value="Availability"/>
                        </onc:sortableColumnHeader>
                    </f:facet>

                    <h:graphicImage value="/images/icon_available_green.png" alt="Up" title="Up"
                                    rendered="#{resourceWithAvailability.availability == 'UP'}"/>
                    <h:graphicImage value="/images/icon_available_red.png" alt="Down" title="Down"
                                    rendered="#{resourceWithAvailability.availability == 'DOWN'}"/>
                    <h:graphicImage value="/images/icon_available_grey.png" alt="Unknown" title="Unknown"
                                    rendered="#{resourceWithAvailability.availability == null}"/>
                </rich:column>

                <f:facet name="footer">
                    <rich:columnGroup>
                        <rich:column colspan="3" width="100%">

                            <ui:param name="paginationDataTableName" value="resourceGroupMembersDataTable"/>
                            <ui:param name="paginationDataModel" value="#{resourceGroupMembersDataModel}"/>
                            <ui:param name="paginationPageControl" value="#{PageControl.ResourceGroupMemberList}"/>
                            <ui:include src="/rhq/resource/include/pagination.xhtml"/>

                        </rich:column>
                    </rich:columnGroup>
                </f:facet>

            </rich:dataTable>


        </rich:simpleTogglePanel>

    </h:form>

    <rich:spacer height="10"/>

</ui:composition>

THIS TEXT WILL BE REMOVED AS WELL.

</html>
