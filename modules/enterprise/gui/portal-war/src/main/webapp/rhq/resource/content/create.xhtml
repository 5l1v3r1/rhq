<?xml version="1.0"?>

<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:onc="http://jboss.org/on/component"
      xmlns:rich="http://richfaces.ajax4jsf.org/rich">

<ui:composition template="/rhq/resource/layout/main.xhtml">

   <ui:param name="pageTitle"
             value="Create New Package of Type '#{CreateNewPackageUIBean.artifactType.displayName}'"/>
   <ui:param name="selectedTabName" value="Content.New"/>
   <ui:define name="content">

      <h:form id="uploadForm" enctype="multipart/form-data">

         <!-- Possible Artifact Types -->

         <rich:panel>
            <f:facet name="header">Supported Artifact Types</f:facet>

            <h:panelGrid columns="1" width="90%" style="min-width: 800px;">

               <rich:dataTable binding="#{ArtifactTypesUIBean.dataTable}"
                               id="artifactTypesDataTable"
                               rows="0"
                               value="#{ArtifactTypesUIBean.dataModel}"
                               var="item"
                               width="100%"
                               columnsWidth="1%, 30%, 69%"
                               headerClass="tableRowHeader"
                               footerClass="on-pager-footer">

                  <f:facet name="PageControlView">
                     <onc:paginationControl id="NONE"/>
                  </f:facet>

                  <rich:column>
                     <f:facet name="header">
                        <rich:spacer/>
                     </f:facet>

                     <onc:select name="selectedType" value="#{item.id}" type="radio" />
                  </rich:column>

                  <rich:column rendered="#{param.debug}">
                     <f:facet name="header">
                        <onc:sortableColumnHeader sort="at.id">
                           <h:outputText styleClass="headerText" value="ID" />
                        </onc:sortableColumnHeader>
                     </f:facet>

                     <h:outputText value="#{item.id}"/>
                  </rich:column>

                  <rich:column>
                     <f:facet name="header">
                        <onc:sortableColumnHeader sort="at.displayName">
                           <h:outputText styleClass="headerText" value="Name"/>
                        </onc:sortableColumnHeader>
                     </f:facet>

                     <h:outputText value="#{item.displayName}"/>
                  </rich:column>

                  <rich:column>
                     <f:facet name="header">
                        <onc:sortableColumnHeader sort="at.description">
                           <h:outputText styleClass="headerText" value="Description"/>
                        </onc:sortableColumnHeader>
                     </f:facet>

                     <h:outputText value="#{item.description}"/>
                  </rich:column>


               </rich:dataTable>

            </h:panelGrid>

            <!-- Upload Form -->

            <input type="hidden" name="id" value="${param.id}"/>
            <h:inputHidden value="#{CreateNewPackageUIBean.artifactType}" converter="ArtifactTypeConverter"/>

            <table>
               <tr>
                  <td><b>Artifact File Name:</b></td>
                  <td><h:inputText value="#{CreateNewPackageUIBean.artifactName}"/></td>
               </tr>
               <tr>
                  <td><b>File:</b></td>
                  <td><onc:upload id="uploadFile"/></td>
               </tr>
            </table>

            <h:commandButton style="margin-top: 10px;" value="CREATE ARTIFACT"
                             action="#{CreateNewPackageUIBean.createArtifact}" styleClass="buttonmed"/>
         </rich:panel>

      </h:form>

   </ui:define>
</ui:composition>

</html>
