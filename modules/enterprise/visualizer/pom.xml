<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>org.rhq</groupId>
        <artifactId>rhq-parent</artifactId>
        <version>1.4.0-SNAPSHOT</version>
    </parent>

    <groupId>org.rhq</groupId>
    <artifactId>rhq-enterprise-visualizer</artifactId>
    <packaging>jar</packaging>

    <name>RHQ Enterprise Visualizer</name>
    <description>RHQ visualization tools</description>

    <scm>
        <connection>scm:svn:http://svn.rhq-project.org/repos/rhq/trunk/modules/enterprise/visualizer/</connection>
        <developerConnection>scm:svn:http://svn.rhq-project.org/repos/rhq/trunk/modules/enterprise/visualizer/
        </developerConnection>
    </scm>

    <properties>
        <scm.module.path>modules/enterprise/visualizer/</scm.module.path>
    </properties>

    <dependencies>

        <!-- Internal Deps -->

        <dependency>
            <groupId>org.rhq</groupId>
            <artifactId>rhq-core-domain</artifactId>
            <version>${project.version}</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>org.rhq</groupId>
            <artifactId>rhq-enterprise-comm</artifactId>
            <version>${project.version}</version>
        </dependency>

        <dependency>
            <groupId>org.rhq</groupId>
            <artifactId>rhq-core-plugin-api</artifactId>
            <version>${project.version}</version>
        </dependency>

        <dependency>
            <groupId>org.rhq</groupId>
            <artifactId>rhq-core-plugin-container</artifactId>
            <version>${project.version}</version>
        </dependency>

        <dependency>
            <groupId>org.rhq</groupId>
            <artifactId>rhq-core-client-api</artifactId>
            <version>${project.version}</version>
        </dependency>

        <dependency>
            <groupId>org.rhq</groupId>
            <artifactId>rhq-enterprise-server</artifactId>
            <version>${project.version}</version>
        </dependency>

        <dependency>
            <groupId>org.rhq</groupId>
            <artifactId>rhq-remoting-cli</artifactId>
            <version>${project.version}</version>
        </dependency>


        <!-- 3rd Party Deps -->

        <dependency>
            <groupId>gnu-getopt</groupId>
            <artifactId>getopt</artifactId>
            <!-- NOTE: The version is defined in the root POM's dependencyManagement section. -->
        </dependency>


        <!-- TODO: This is a fix for the Javac bug requiring annotations to be
available when compiling dependent classes. It is fixed in JDK 6 -->
        <dependency>
            <groupId>javax.persistence</groupId>
            <artifactId>persistence-api</artifactId>
            <version>1.0</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>jboss</groupId>
            <artifactId>jboss-remoting</artifactId>
            <!-- NOTE: The version is defined in the root POM's dependencyManagement section. -->
        </dependency>


        <dependency>
            <groupId>jboss</groupId>
            <artifactId>jboss-j2ee</artifactId>
            <version>4.2.1.GA</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>jboss</groupId>
            <artifactId>jboss-ejb3-client</artifactId>
            <version>4.2.2.GA</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>jboss</groupId>
            <artifactId>jbossall-client</artifactId>
            <version>4.2.2.GA</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>opensymphony</groupId>
            <artifactId>quartz</artifactId>
            <version>1.5.2</version>
            <scope>provided</scope>
            <!-- by JBossAS itself, which ships with 1.5.2 -->
        </dependency>

        <dependency>
            <groupId>hibernate</groupId>
            <artifactId>hibernate3</artifactId>
            <version>3.2.r14201-1</version>
            <scope>provided</scope>
            <!-- by JBossAS -->
        </dependency>

        <dependency>
            <groupId>jboss.jboss-embeddable-ejb3</groupId>
            <artifactId>jboss-ejb3-all</artifactId>
            <version>1.0.0.Alpha9</version>
            <scope>provided</scope>
            <!-- needed for referenced domain entities that use Hibernate annotations -->
        </dependency>

        <dependency>
            <groupId>jboss.jboss-embeddable-ejb3</groupId>
            <artifactId>hibernate-all</artifactId>
            <version>1.0.0.Alpha9</version>
            <scope>provided</scope>
            <!-- needed for referenced domain entities that use Hibernate annotations -->
        </dependency>

        <dependency>
            <groupId>xmlrpc</groupId>
            <artifactId>xmlrpc-client</artifactId>
            <version>3.0</version>
        </dependency>


        <dependency>
            <groupId>org.apache.xmlrpc</groupId>
            <artifactId>xmlrpc-common</artifactId>
            <version>3.0</version>
        </dependency>

        <dependency>
            <groupId>org.jboss</groupId>
            <artifactId>jboss-jaxws</artifactId>
            <version>2.0.1.SP2</version>
        </dependency>

        <dependency>
            <groupId>jline</groupId>
            <artifactId>jline</artifactId>
            <version>0.9.94</version>
        </dependency>


        <dependency>
            <groupId>org.swinglabs</groupId>
            <artifactId>swingx</artifactId>
            <version>0.9.2</version>
        </dependency>
        <dependency>
            <groupId>org.swinglabs</groupId>
            <artifactId>swing-worker</artifactId>
            <version>1.1</version>
        </dependency>


        <dependency>
            <groupId>jfree</groupId>
            <artifactId>jfreechart</artifactId>
            <version>1.0.9</version>
        </dependency>
        <dependency>
            <groupId>jfree</groupId>
            <artifactId>jcommon</artifactId>
            <version>1.0.9</version>
        </dependency>


    </dependencies>

    <build>
        <plugins>




            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-shade-plugin</artifactId>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>shade</goal>
                        </goals>
                        <configuration>
                            <artifactSet>
                                <includes>
                                    <include>swing-worker:swing-worker</include>
                                </includes>
                            </artifactSet>
                            <transformers>
                                <transformer
                                        implementation="org.apache.maven.plugins.shade.resource.ComponentsXmlResourceTransformer"/>
                            </transformers>
                        </configuration>
                    </execution>
                </executions>
            </plugin>


            <plugin>


                <artifactId>maven-antrun-plugin</artifactId>
                <executions>
                    <execution>
                        <phase>process-classes</phase>
                        <configuration>
                            <tasks>

                                <!-- generate the I18N resource bundles -->
                                <taskdef name="i18n" classpathref="maven.runtime.classpath"
                                         classname="mazz.i18n.ant.I18NAntTask"/>

                                <!--
                                                <i18n outputdir="${project.build.outputDirectory}" defaultlocale="en" verbose="false" append="false" verify="true">
                                                   <classpath refid="maven.runtime.classpath" />
                                                   <classfileset dir="${project.build.outputDirectory}">
                                                      <include name="**/AgentI18NResourceKeys.class" />
                                                      <include name="**/AgentSetupInstructions.class" />
                                                   </classfileset>
                                                </i18n>
                                -->
                                <!-- create our version.txt file that goes in our jar -->
                                <tstamp>
                                    <format property="build.time" pattern="dd.MMM.yyyy HH.mm.ss z"/>
                                </tstamp>

                                <!-- cross-platform way to get the hostname, assuming hostname executable is in your path -->
                                <exec executable="hostname" outputproperty="build.hostname" failifexecutionfails="false"
                                      failonerror="false"/>

                                <echo file="${project.build.outputDirectory}/version.txt" append="false">
                                    Product-Name=${rhq.product.name}
                                    Product-Version=${project.version}
                                    Module-Name=${pom.name}
                                    Module-Version=${pom.version}
                                    Build-Date=${build.time}
                                    Build-Jdk-Vendor=${java.vendor}
                                    Build-Jdk=${java.version}
                                    Build-OS-Name=${os.name}
                                    Build-OS-Version=${os.version}
                                    Built-By=${user.name}
                                    Build-Machine=${build.hostname}
                                    Build-Number=${buildNumber}
                                </echo>

                            </tasks>
                        </configuration>
                        <goals>
                            <goal>run</goal>
                        </goals>
                    </execution>

                    <execution>
                        <id>client-distro-package</id>
                        <phase>install</phase>
                        <configuration>
                            <tasks>
                                <ant antfile="${basedir}/ant-run.xml" dir="${basedir}" target="package-dist"
                                     inheritAll="false" inheritRefs="false">
                                    <property name="settings.localRepository" value="${settings.localRepository}"/>
                                    <property name="project.version" value="${project.version}"/>

                                    <property name="concurrent.version" value="${concurrent.version}"/>
                                    <property name="getopt.version" value="${getopt.version}"/>
                                    <property name="jboss.version" value="${jboss.version}"/>
                                    <property name="jboss-common.version" value="${jboss-common.version}"/>
                                    <property name="jboss-remoting.version" value="${jboss-remoting.version}"/>
                                    <property name="jboss-serialization.version"
                                              value="${jboss-serialization.version}"/>
                                    <property name="sigar.version" value="${sigar.version}"/>
                                    <property name="jaxb-api.version" value="${jaxb-api.version}"/>
                                    <property name="jaxb-impl.version" value="${jaxb-impl.version}"/>
                                </ant>
                            </tasks>
                        </configuration>
                        <goals>
                            <goal>run</goal>
                        </goals>
                    </execution>


                    <execution>
                        <id>clean-test-dirs</id>
                        <phase>test</phase>
                        <configuration>
                            <tasks>
                                <delete dir="${basedir}/data"/>
                                <delete dir="${basedir}/plugins"/>
                            </tasks>
                        </configuration>
                        <goals>
                            <goal>run</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>



            <!--
              <plugin>
               <groupId>org.apache.maven.plugins</groupId>
               <artifactId>maven-jar-plugin</artifactId>
               <executions>
                 <execution>
                   <goals>
                     <goal>sign</goal>
                   </goals>
                 </execution>
               </executions>
               <configuration>
                 <alias>RHQ</alias>
                 <keystore>../server/container/target/rhq-server-1.1.0-SNAPSHOT/jbossas/server/default/conf/rhq.keystore</keystore>
                 <storepass>RHQManagement</storepass>
                 <signedjar>${project.build.directory}/signed/${project.build.finalName}.jar</signedjar>
                 <verify>true</verify>
                   <archive>
                       <manifestEntries>
                           <Product-Name>${rhq.product.name}</Product-Name>
                           <Product-Version>${project.version}</Product-Version>
                       </manifestEntries>
                   </archive>

               </configuration>
             </plugin>
            -->
            <plugin>
                <artifactId>maven-surefire-plugin</artifactId>
                <configuration>
                    <excludedGroups>${rhq.testng.excludedGroups}</excludedGroups>
                </configuration>
            </plugin>

            <plugin>
                <artifactId>maven-surefire-report-plugin</artifactId>
            </plugin>

        </plugins>
    </build>

    <reporting>
        <plugins>

            <plugin>
                <artifactId>maven-surefire-report-plugin</artifactId>
            </plugin>

        </plugins>
    </reporting>

    <profiles>

        <profile>
            <id>prod</id>
            <properties>
                <agent-with-connectors>true</agent-with-connectors>
            </properties>
        </profile>

    </profiles>

</project>
