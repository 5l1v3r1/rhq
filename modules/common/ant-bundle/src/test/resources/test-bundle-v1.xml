<?xml version="1.0"?>

<project name="test-bundle" xmlns:rhq="antlib:org.rhq.bundle">    

    <rhq:bundle name="example.com (JBoss EAP 4.3)" version="1.0"
                description="example.com corporate website hosted on JBoss EAP 4.3"/>

    <rhq:input-property
       name="listener.port"
       description="This is where the product will listen for incoming messages"
       required="true"
       defaultValue="8080"
       type="integer"/>    
    
    <target name="deploy">
        <echo>Deploying Test Bundle v1.0 to ${rhq.deploy.dir}...</echo>

        <rhq:deploy>
            <rhq:file name="test-v1.properties" destinationFile="subdir/test.properties"/>
            <rhq:archive name="file.zip"/>
            <rhq:replace>
                <rhq:fileset includes="**/*.properties"/>
            </rhq:replace>
            <rhq:ignore>
                <rhq:fileset includes="*.log"/>
            </rhq:ignore>
        </rhq:deploy>

        <mkdir dir="root"/>
        <rhq:install-system-service name="foo" scriptFile="foo-script" configFile="foo-config" overwriteScript="true"
                                    startLevels="3,4,5" startPriority="80" stopPriority="20" root="root"/>
    </target>

</project>