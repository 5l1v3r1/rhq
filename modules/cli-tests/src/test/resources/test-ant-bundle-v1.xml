<project name="example.com-website" default="deploy"
         xmlns:rhq="antlib:org.rhq.bundle">

    <rhq:bundle name="example.com (JBoss EAP 4.3)" version="1.0"
                description="example.com corporate website hosted on JBoss EAP 4.3"/>

    <rhq:input-property
       name="http.port"
       description="the HTTP port the JBoss EAP server should listen on"
       required="true"
       type="integer"/>

    <rhq:input-property
       name="https.port"
       description="the HTTPS port the JBoss EAP server should listen on"
       required="true"
       type="integer"/>

    <target name="deploy">
        <echo>Deploying example.com website v1.0 to ${rhq.deploy.dir}...</echo>
        <rhq:deploy>
            <rhq:archive name="test-ant-bundle-v1.zip"/>
            <rhq:replace>
                <!-- If no 'dir' attribute is specified, rhq:fileset defaults to ${rhq.deploy.dir}. -->
                <rhq:fileset includes="**/*.properties"/>
            </rhq:replace>
            <rhq:ignore>
                <rhq:fileset>
                   <include name="jbossas/server/default/data/**"/>
                   <include name="jbossas/server/default/logs/**"/>
                   <include name="jbossas/server/default/tmp/**"/>
                   <include name="jbossas/server/default/work/**"/>
                </rhq:fileset>
            </rhq:ignore>
        </rhq:deploy>
    </target>

</project>
